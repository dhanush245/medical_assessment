<div class="component-wrapper">
    <div class="bg-particles"></div>
    <h2 class="gradient-text title-entrance">ðŸ¦´ Orthopedics Assessment</h2>
    <p>Welcome to the Orthopedics Assessment module. Enter patient details below to begin the musculoskeletal evaluation.</p>

    <form *ngIf="showForm" (ngSubmit)="onSubmit()" #orthoForm="ngForm" class="card-animation neon-border">
        <div class="form-group">
            <label for="name">Patient Name</label>
            <input 
                type="text" 
                id="name"
                name="name" 
                [(ngModel)]="formData.name" 
                required 
                placeholder="Enter patient's full name"
                class="interactive"
            />
        </div>

        <div class="form-group">
            <label for="age">Age</label>
            <input 
                type="number" 
                id="age"
                name="age" 
                [(ngModel)]="formData.age" 
                required 
                placeholder="Enter patient's age"
                min="0"
                max="120"
                class="interactive"
            />
        </div>

        <div class="form-group">
            <label for="gender">Gender</label>
            <select 
                id="gender"
                name="gender" 
                [(ngModel)]="formData.gender" 
                required
                class="interactive"
            >
                <option value="">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Others">Others</option>
            </select>
        </div>

        <div class="form-group">
            <label for="injuryLocation">Injury Location</label>
            <textarea 
                id="injuryLocation"
                name="injuryLocation" 
                [(ngModel)]="formData.injuryLocation"
                placeholder="Specify the location of injury or pain (e.g., left knee, right shoulder)"
                class="interactive"
            ></textarea>
        </div>

        <div class="form-group">
            <label for="rangeOfMotion">Range of Motion</label>
            <textarea 
                id="rangeOfMotion"
                name="rangeOfMotion" 
                [(ngModel)]="formData.rangeOfMotion"
                placeholder="Document range of motion assessment"
                class="interactive"
            ></textarea>
        </div>

        <div class="form-group">
            <label for="xrayResults">X-Ray Results</label>
            <textarea 
                id="xrayResults"
                name="xrayResults" 
                [(ngModel)]="formData.xrayResults"
                placeholder="Record X-ray findings and interpretations"
                class="interactive"
            ></textarea>
        </div>

        <div class="form-group">
            <label for="treatmentPlan">Treatment Plan</label>
            <textarea 
                id="treatmentPlan"
                name="treatmentPlan" 
                [(ngModel)]="formData.treatmentPlan"
                placeholder="Outline recommended treatment plan"
                class="interactive"
            ></textarea>
        </div>

        <button type="submit" class="interactive">
            <span *ngIf="!isLoading">ðŸ’¾ Save Assessment</span>
            <span *ngIf="isLoading" class="loading"></span>
            <span *ngIf="isLoading">Saving...</span>
        </button>
    </form>

    <button class="create-btn interactive" (click)="onCreate()" title="Create New Assessment">
        <span *ngIf="!showForm">+</span>
        <span *ngIf="showForm">âœ•</span>
    </button>

    <!-- Success Message -->
    <div *ngIf="showSuccess" class="success-message" (click)="hideSuccess()">
        <div>âœ…</div>
        <div>Assessment saved successfully!</div>
    </div>

    <!-- Saved Summary -->
    <div *ngIf="lastSaved && !showForm" class="card-animation" style="max-width: 800px; margin: 1.5rem auto; background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: 16px; box-shadow: var(--shadow-lg); overflow: hidden;">
        <div style="padding: 1rem; background: linear-gradient(135deg, #22c55e, #16a34a); color: #fff; font-weight: 700;">Saved Assessment Summary</div>
        <div style="padding: 1.25rem;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                <div><strong>Name:</strong> {{ lastSaved.name || '-' }}</div>
                <div><strong>Age:</strong> {{ lastSaved.age || '-' }}</div>
                <div><strong>Gender:</strong> {{ lastSaved.gender || '-' }}</div>
                <div style="grid-column: 1 / -1;"><strong>Injury Location:</strong> {{ lastSaved.injuryLocation || '-' }}</div>
                <div style="grid-column: 1 / -1;"><strong>Range of Motion:</strong> {{ lastSaved.rangeOfMotion || '-' }}</div>
                <div style="grid-column: 1 / -1;"><strong>X-Ray Results:</strong> {{ lastSaved.xrayResults || '-' }}</div>
                <div style="grid-column: 1 / -1;"><strong>Treatment Plan:</strong> {{ lastSaved.treatmentPlan || '-' }}</div>
            </div>
            <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                Saved at: {{ lastSaved.savedAt | date:'medium' }}
            </div>
        </div>
    </div>
</div>