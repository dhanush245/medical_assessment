<div class="component-wrapper">
    <div class="bg-particles"></div>
    <h2 class="gradient-text title-entrance">âš½ Sports Medicine Assessment</h2>
    <p>Welcome to the Sports Medicine Assessment module. Enter patient details below to begin the sports injury evaluation.</p>

    <form *ngIf="showForm" (ngSubmit)="onSubmit()" #sportsForm="ngForm" class="card-animation neon-border">
        <div class="form-group">
            <label for="name">Patient Name</label>
            <input 
                type="text" 
                id="name"
                name="name" 
                [(ngModel)]="formData.name" 
                required 
                placeholder="Enter patient's full name"
                class="interactive"
            />
        </div>

        <div class="form-group">
            <label for="age">Age</label>
            <input 
                type="number" 
                id="age"
                name="age" 
                [(ngModel)]="formData.age" 
                required 
                placeholder="Enter patient's age"
                min="0"
                max="120"
                class="interactive"
            />
        </div>

        <div class="form-group">
            <label for="sport">Sport/Activity</label>
            <input 
                type="text" 
                id="sport"
                name="sport" 
                [(ngModel)]="formData.sport" 
                placeholder="Enter the sport or activity"
                class="interactive"
            />
        </div>

        <div class="form-group">
            <label for="injuryType">Injury Type</label>
            <textarea 
                id="injuryType"
                name="injuryType" 
                [(ngModel)]="formData.injuryType"
                placeholder="Describe the type of sports injury"
                class="interactive"
            ></textarea>
        </div>

        <div class="form-group">
            <label for="recoveryPlan">Recovery Plan</label>
            <textarea 
                id="recoveryPlan"
                name="recoveryPlan" 
                [(ngModel)]="formData.recoveryPlan"
                placeholder="Outline rehabilitation and recovery plan"
                class="interactive"
            ></textarea>
        </div>

        <div class="form-group">
            <label for="returnToPlay">Return to Play Assessment</label>
            <textarea 
                id="returnToPlay"
                name="returnToPlay" 
                [(ngModel)]="formData.returnToPlay"
                placeholder="Document return to play criteria and timeline"
                class="interactive"
            ></textarea>
        </div>

        <button type="submit" class="interactive">
            <span *ngIf="!isLoading">ðŸ’¾ Save Assessment</span>
            <span *ngIf="isLoading" class="loading"></span>
            <span *ngIf="isLoading">Saving...</span>
        </button>
    </form>

    <button class="create-btn interactive" (click)="onCreate()" title="Create New Assessment">
        <span *ngIf="!showForm">+</span>
        <span *ngIf="showForm">âœ•</span>
    </button>

    <!-- Success Message -->
    <div *ngIf="showSuccess" class="success-message" (click)="hideSuccess()">
        <div>âœ…</div>
        <div>Assessment saved successfully!</div>
    </div>

    <!-- Saved Summary -->
    <div *ngIf="lastSaved && !showForm" class="card-animation" style="max-width: 800px; margin: 1.5rem auto; background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: 16px; box-shadow: var(--shadow-lg); overflow: hidden;">
        <div style="padding: 1rem; background: linear-gradient(135deg, #f59e0b, #d97706); color: #fff; font-weight: 700;">Saved Assessment Summary</div>
        <div style="padding: 1.25rem;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                <div><strong>Name:</strong> {{ lastSaved.name || '-' }}</div>
                <div><strong>Age:</strong> {{ lastSaved.age || '-' }}</div>
                <div><strong>Sport:</strong> {{ lastSaved.sport || '-' }}</div>
                <div style="grid-column: 1 / -1;"><strong>Injury Type:</strong> {{ lastSaved.injuryType || '-' }}</div>
                <div style="grid-column: 1 / -1;"><strong>Recovery Plan:</strong> {{ lastSaved.recoveryPlan || '-' }}</div>
                <div style="grid-column: 1 / -1;"><strong>Return To Play:</strong> {{ lastSaved.returnToPlay || '-' }}</div>
            </div>
            <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                Saved at: {{ lastSaved.savedAt | date:'medium' }}
            </div>
        </div>
    </div>
</div>