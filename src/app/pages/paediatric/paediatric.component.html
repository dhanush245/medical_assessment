<div class="component-wrapper">
    <div class="bg-particles"></div>
    <h2 class="gradient-text title-entrance">ðŸ‘¶ Pediatrics Assessment</h2>
    <p>Welcome to the Pediatrics Assessment module. Enter patient details below to begin the pediatric evaluation.</p>

    <form *ngIf="showForm" (ngSubmit)="onSubmit()" #paediatricForm="ngForm" class="card-animation neon-border">
        <div class="form-group">
            <label for="name">Patient Name</label>
            <input 
                type="text" 
                id="name"
                name="name" 
                [(ngModel)]="formData.name" 
                required 
                placeholder="Enter patient's full name"
                class="interactive"
            />
        </div>

        <div class="form-group">
            <label for="age">Age (in months)</label>
            <input 
                type="number" 
                id="age"
                name="age" 
                [(ngModel)]="formData.age" 
                required 
                placeholder="Enter age in months"
                min="0"
                max="216"
                class="interactive"
            />
        </div>

        <div class="form-group">
            <label for="weight">Weight (kg)</label>
            <input 
                type="number" 
                id="weight"
                name="weight" 
                [(ngModel)]="formData.weight" 
                placeholder="Enter weight in kilograms"
                step="0.1"
                class="interactive"
            />
        </div>

        <div class="form-group">
            <label for="height">Height (cm)</label>
            <input 
                type="number" 
                id="height"
                name="height" 
                [(ngModel)]="formData.height" 
                placeholder="Enter height in centimeters"
                step="0.1"
                class="interactive"
            />
        </div>

        <div class="form-group">
            <label for="developmentalMilestones">Developmental Milestones</label>
            <textarea 
                id="developmentalMilestones"
                name="developmentalMilestones" 
                [(ngModel)]="formData.developmentalMilestones"
                placeholder="Record developmental milestones and assessments"
                class="interactive"
            ></textarea>
        </div>

        <div class="form-group">
            <label for="vaccinationHistory">Vaccination History</label>
            <textarea 
                id="vaccinationHistory"
                name="vaccinationHistory" 
                [(ngModel)]="formData.vaccinationHistory"
                placeholder="Document vaccination history and schedule"
                class="interactive"
            ></textarea>
        </div>

        <div class="form-group">
            <label for="parentalConcerns">Parental Concerns</label>
            <textarea 
                id="parentalConcerns"
                name="parentalConcerns" 
                [(ngModel)]="formData.parentalConcerns"
                placeholder="Record any concerns raised by parents/guardians"
                class="interactive"
            ></textarea>
        </div>

        <button type="submit" class="interactive">
            <span *ngIf="!isLoading">ðŸ’¾ Save Assessment</span>
            <span *ngIf="isLoading" class="loading"></span>
            <span *ngIf="isLoading">Saving...</span>
        </button>
    </form>

    <button class="create-btn interactive" (click)="onCreate()" title="Create New Assessment">
        <span *ngIf="!showForm">+</span>
        <span *ngIf="showForm">âœ•</span>
    </button>

    <!-- Success Message -->
    <div *ngIf="showSuccess" class="success-message" (click)="hideSuccess()">
        <div>âœ…</div>
        <div>Assessment saved successfully!</div>
    </div>

    <!-- Saved Summary -->
    <div *ngIf="lastSaved && !showForm" class="card-animation" style="max-width: 800px; margin: 1.5rem auto; background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: 16px; box-shadow: var(--shadow-lg); overflow: hidden;">
        <div style="padding: 1rem; background: linear-gradient(135deg, #3b82f6, #2563eb); color: #fff; font-weight: 700;">Saved Assessment Summary</div>
        <div style="padding: 1.25rem;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                <div><strong>Name:</strong> {{ lastSaved.name || '-' }}</div>
                <div><strong>Age (months):</strong> {{ lastSaved.age || '-' }}</div>
                <div><strong>Weight (kg):</strong> {{ lastSaved.weight || '-' }}</div>
                <div><strong>Height (cm):</strong> {{ lastSaved.height || '-' }}</div>
                <div style="grid-column: 1 / -1;"><strong>Developmental Milestones:</strong> {{ lastSaved.developmentalMilestones || '-' }}</div>
                <div style="grid-column: 1 / -1;"><strong>Vaccination History:</strong> {{ lastSaved.vaccinationHistory || '-' }}</div>
                <div style="grid-column: 1 / -1;"><strong>Parental Concerns:</strong> {{ lastSaved.parentalConcerns || '-' }}</div>
            </div>
            <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                Saved at: {{ lastSaved.savedAt | date:'medium' }}
            </div>
        </div>
    </div>
</div>